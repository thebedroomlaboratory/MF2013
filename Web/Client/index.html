<html>
	<head>
		<script type="text/javascript" src="scripts/jquery-2.0.3.js"></script>
		<script type="text/javascript" src="scripts/maker.js" ></script>
		<script type="text/javascript"></script>

		<script type="text/javascript">
				function Init () {
            var checkbox = document.getElementById ("heat_onoffswitch");
            if (checkbox.addEventListener) {
                checkbox.addEventListener ("CheckboxStateChange", OnChangeCheckbox, false);
            }
        }

        function OnChangeCheckbox (event) {
            var checkbox = event.target;
         
            sendCommands();

        }

        function getCommands(){
        	var isHeatOn = $('#heat_onoffswitch').is(':checked')  === true?1:0;
        	var isLightOn = $('#light_onoffswitch').is(':checked') === true?1:0;
        	var isOvenOn = $('#oven_onoffswitch').is(':checked') === true?1:0;
        	return String(isHeatOn)+String(isLightOn)+String(isOvenOn);		
        }
        function sendCommands()
	  {
	  	commands = getCommands();	
	    var connection=new WebSocket("ws://localhost:9090/ws");
	    connection.onopen = function () {
	      connection.send(commands); //send a message to server once connection is opened.
	    };
	    connection.onerror = function (error) {
	      console.log('Error Logged: ' + error); //log errors
	    };
	    connection.onmessage = function (e) {
	      console.log('Received From Server: ' + e.data); //log the received message
	    };
	    connection.onclose = function(){
	    	console.log('connection closed');
	    };


	}
		</script>

		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="style/toggleButton.css">
		<link rel="stylesheet" type="text/css" href="style/main.css">
	</head>
	<body onload="Init()">
		<div id="counterDisplay"></div>
		<div id="roomLightTemp"></div>
		<div id="ovenDisplay"></div>
		<div id="controlCenter">
			<div id="heating_Controls" class="control">
				<div class="controlLabel"> 
					<label style="display:inline" style="position:relative;top:-10px"> Heating:</label>
				</div>
				<div class="sliderWrapper">
					<div class="onoffswitch">
					    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="heat_onoffswitch" checked>
					    <label class="onoffswitch-label" for="heat_onoffswitch">
					        <div class="onoffswitch-inner">
					            <div class="onoffswitch-active"><div class="onoffswitch-switch">ON</div></div>
					            <div class="onoffswitch-inactive"><div class="onoffswitch-switch">OFF</div></div>
					        </div>
					    </label>
					</div>
				</div>
			</div><!-- End of heating_Controls -->

			<div id="light_Controls" class="control">
				<div class="controlLabel"> 
					<label style="display:inline" style="position:relative;top:-10px" > Lights:</label>
				</div>
				<div class="sliderWrapper">
					<div class="onoffswitch">
					    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="light_onoffswitch" checked>
					    <label class="onoffswitch-label" for="light_onoffswitch">
					        <div class="onoffswitch-inner">
					            <div class="onoffswitch-active"><div class="onoffswitch-switch">ON</div></div>
					            <div class="onoffswitch-inactive"><div class="onoffswitch-switch">OFF</div></div>
					        </div>
					    </label>
					</div>
				</div>
			</div><!-- End of hlight_Controls -->

			<div id="oven_Controls" class="control">
				<div class="controlLabel"> 
					<label style="display:inline" style="position:relative;top:-10px"> Oven:</label>
				</div>
				<div class="sliderWrapper">
					<div class="onoffswitch">
					    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="oven_onoffswitch" checked>
					    <label class="onoffswitch-label" for="oven_onoffswitch">
					        <div class="onoffswitch-inner">
					            <div class="onoffswitch-active"><div class="onoffswitch-switch">ON</div></div>
					            <div class="onoffswitch-inactive"><div class="onoffswitch-switch">OFF</div></div>
					        </div>
					    </label>
					</div>
				</div>
			</div><!-- End of hlight_Controls -->

		</div><!--End of controlCenter -->


		<div id="sse">
		</div>

		<button id="button" onclick="sendCommands(101);getCommands();">Button</button>
	</body>
</html>